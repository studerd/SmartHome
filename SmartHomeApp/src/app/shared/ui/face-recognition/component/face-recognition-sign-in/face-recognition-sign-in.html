<div class="screen">

  <!-- Splash plein Ã©cran -->
  <div class="splash" [class.up]="splashUp$()" (click)="onSplashClick()">
    <div class="logo">
      <img src="assets/logo.png" alt="">
      <div class="logo-text">Smart Home</div>
      <div class="hint">{{ 'account-feature.component.face-recognition.sign-in-touch' | translate }}</div>
    </div>
  </div>

  <!-- Zone reconnaissance -->
  <div class="recog">
    <div class="viewport mirror"
         [style.--zoom]="1.5"
         [class.capturable]="isCapturable$()"
         [class.captured]="finalized$()">

      <video #video class="video" playsinline muted></video>
      <canvas #canvas class="canvas"></canvas>

      @if (loadingLibs$() || !camReady$()) {
        <div class="overlay">
          <div class="spinner"></div>
          @if (loadingLibs$()) {
            <p>{{ 'account-feature.component.face-recognition.sign-in-loading'| translate }}</p>
          } @else if (finalized$()) {
            <p>{{ 'account-feature.component.face-recognition.sign-in'| translate }}</p>
          } @else {
            <p>{{ 'account-feature.component.face-recognition.sign-in-init' | translate }}</p>
          }
        </div>
      }

      @if (capturing$()) {
        <div class="overlay">
          <div class="ring" [style.--p]="progress$()">
            <svg viewBox="0 0 100 100">
              <circle cx="50" cy="50" r="44"/>
            </svg>
            <div class="pct">{{ (progress$() * 100) | number:'1.0-0' }}%</div>
          </div>
          <p>{{ 'account-feature.component.face-recognition.sign-in-analyze' | translate }}</p>
        </div>
      }
    </div>

    @if (error$()) {
      <p class="err">{{ error$() }}</p>
    }
  </div>
</div>
